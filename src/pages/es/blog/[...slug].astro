---
import BlogPostLayout from '@layouts/BlogPostLayout.astro'
import { getCollection } from 'astro:content'

export async function getStaticPaths() {
  const pages = await getCollection('blog')

  const paths = pages.map((page) => {
    const [lang, ...slug] = page.slug.split('/')
    return { params: { lang, slug: slug.join('/') || undefined }, props: page }
  })

  return paths
}

const { lang } = Astro.params
const page = Astro.props
// const formattedDate = page.data.date.toLocaleString(lang)

const { Content } = await page.render()
const {
  data: { title }
} = Astro.props
---

<BlogPostLayout title={title}>
  <Content />
</BlogPostLayout>
